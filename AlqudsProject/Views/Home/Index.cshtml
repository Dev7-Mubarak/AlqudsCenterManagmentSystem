@model AlqudsProject.ViewModels.CenterPageViewModel
<link rel="stylesheet" href="~/css/index.css" />
@{
    ViewData["Title"] = "الصفحة الرئيسية";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show">
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
else if (TempData["Error"] != null)
{
    <div class="alert alert-success alert-dismissible fade show">
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

<div id="mainCarousel" class="carousel slide mb-4" data-bs-ride="carousel" data-bs-interval="3000">
     <div class="carousel-indicators">
        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="صورة 1"></button>
        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1" aria-label="صورة 2"></button>
        <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2" aria-label="صورة 3"></button>
    </div>
    <div class="carousel-inner rounded-3 shadow">
        <div class="carousel-item active">
            <img src="~/images/p11.jpg" class="d-block w-100" alt="الصورة الأولى">
        </div>
        <div class="carousel-item">
            <img src="~/images/p22 (2).jpg" class="d-block w-100" alt="الصورة الثانية">
        </div>
        <div class="carousel-item">
            <img src="~/images/p33.jpg" class="d-block w-100" alt="الصورة الثالثة">
        </div>
    </div>

    <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
    </button>
</div>

<section class="container my-5" id="about">
    <h3 class="text-end mb-4"><span class="bg-dark text-white px-2 py-1">عن المركز:</span></h3>
    <h4 class="text-end"style="line-height:1.7">
        مركز القدس لتحفيظ القرآن الكريم هو منارة علمية تربوية تسعى إلى تعليم كتاب الله تعالى وتربية النفوس على هديه، بأسلوب منهجي تربوي يجمع بين الأصالة والمعاصرة. يهدف المركز إلى إعداد جيل من الفتيات المتمسكات بالقرآن علمًا وخلقًا وسلوكًا، ويُعنَى بغرس القيم الإسلامية وترسيخ العقيدة الصحيحة في نفوس الطالبات، وذلك من خلال برامج تعليمية متكاملة، وحلقات تحفيظ منظمة، وبيئة تربوية آمنة ومحفزة.

        يحتضن المركز نخبة من المعلمات المؤهلات اللواتي يتمتعن بالكفاءة والخبرة في تعليم القرآن وعلومه، ويقدم مستويات مختلفة تناسب كافة الأعمار والمستويات من المبتدئات إلى الخاتمات. كما يوفر المركز اختبارات تقييم دورية، وخطط متابعة فردية، إضافة إلى إقامة فعاليات قرآنية وتربوية تُسهم في تنمية روح التنافس والارتباط بالقرآن الكريم.

        ولأننا نؤمن بأن القرآن منهج حياة، فإن المركز لا يقتصر فقط على التحفيظ، بل يشمل كذلك تعليم التجويد، والسلوكيات الإسلامية، وغرس روح الالتزام والتفوق في نفوس الطالبات. رؤيتنا هي أن يكون كل بيت فيه حافظة لكتاب الله، ورسالتنا أن نُعلّم القرآن كما أنزل، بالحكمة والرحمة، ونربي جيلًا قرآنيًا يعتز بدينه ويفخر بقيمه.
    </h4>

    <div class="row text-center mt-5 justify-content-center" id="stats">
        <div class="stat-box col-6 col-md-4 col-lg-2 mb-3">
            <img src="~/images/students.png" alt="عدد الطالبات" width="60" />
            <h5 id="studentsCount">0</h5>
            <h6>عدد الطالبات</h6>
        </div>
        <div class="stat-box col-6 col-md-4 col-lg-2 mb-3">
            <img src="~/images/newStudents.png" alt="عدد الطالبات الجدد" width="60" />
            <h5 id="newStudentsCount">0</h5>
            <h6>عدد الطالبات الجدد</h6>
        </div>
        <div class="stat-box col-6 col-md-4 col-lg-2 mb-3">
            <img src="~/images/girls.png" alt="عدد الخاتمات" width="60" />
            <h5 id="graduatedCount">0</h5>
            <h6>عدد الخاتمات</h6>
        </div>
        <div class="stat-box col-6 col-md-4 col-lg-2 mb-3">
            <img src="~/images/teachers.png" alt="عدد المعلمات" width="60" />
            <h5 id="teachersCount">0</h5>
            <h6>عدد المعلمات</h6>
        </div>
        <div class="stat-box col-6 col-md-4 col-lg-2 mb-3">
            <img src="~/images/koran.png" alt="عدد الحلقات" width="60" />
            <h5 id="halaqatCount">0</h5>
            <h6>عدد الحلقات</h6>
        </div>
        <div class="stat-box col-6 col-md-4 col-lg-2 mb-3">
            <img src="~/images/activities.png" alt="عدد الفعاليات" width="60" />
            <h5 id="eventsCount">0</h5>
            <h6>عدد الفعاليات</h6>
        </div>
    </div>
</section>

<section class="container my-5" id="activities">
    <h3 class="text-end mb-4">
        <span class="bg-dark text-white px-2 py-1">الأنشطة والفعاليات</span>
    </h3>

    @if (Model.Activities != null && Model.Activities.Any())
    {
        <div class="row">
            @foreach (var item in Model.Activities.Take(3)) 
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100 shadow-sm">
                        <img src="@Url.Content(item.ImageUrl)" class="card-img-top" style="height: 220px; object-fit: cover;" />
                        <div class="divider-line"></div>
                        <div class="card-body d-flex flex-column justify-content-between text-center">
                            <div>
                                <h5 class="card-title fw-bold fs-5">@item.Title</h5>
                                <p class="card-text">@item.Description</p>
                            </div>

                            <div class="d-flex justify-content-center mt-3">
                                <a href="@Url.Action("Details", "Home", new {id = item.Id})" class="custom-readmore">اقرأ المزيد</a>
                            </div>
                            
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="text-center mt-4">
            <a href="#" class="custom-more-news">المزيد من الأخبار</a>
        </div>
    }
    else
    {
        <p class="text-center text-muted">لا توجد أنشطة حالياً.</p>
    }
</section>

<section class="donation-section text-center" style="position: relative; overflow: hidden; background-color: #F5E6DA;">
    <svg viewBox="0 0 500 150" preserveAspectRatio="none" 
         style="position: absolute; top: 0; left: 0; width: 100%; height: 80px; z-index: 1;">
        <path d="M-0.84,47.75 C150.00,150.00 349.60,-49.98 500.84,47.75 L500.00,0.00 L0.00,0.00 Z" 
              style="stroke: none; fill: #6B705C;"></path> 
    </svg>

    <div class="donation-header" style="position: relative; z-index: 2; padding-top: 80px;">
        <h2>تبرعك سهل وآمن</h2>
        <p class="lead">عبر وسائل الدفع المختلفة</p>
        <div class="payment-methods mb-4">
            <img src="~/images/فيزا.jpg" alt="Visa" class="payment-logo">
            <img src="~/images/بنك.jpg" alt="MasterCard" class="payment-logo">
            <img src="~/images/ماستر.jpg" alt="تحويل بنكي" class="payment-logo">
        </div>
        <a href="/Donation" class="btn btn-donate">تبرع الآن!</a>
    </div>
</section>


<section class="partners-awards-section">
    <div class="container">
        <h2 class="section-title">شركاء النجاح</h2>
        <div class="partners-logos">
            <img src="~/images/شريك1.jpg" alt="شريك 1" />
            <img src="~/images/شريك2.jpg" alt="شريك 2" />
            <img src="~/images/شريك3.jpg" alt="شريك 3" />
            <img src="~/images/شريك4.jpg" alt="شريك 4" />
        </div>
        <h2 class="section-title mt-5">جوائز القدس</h2>
        <div class="awards-logos">
            <div class="award"><img src="~/images/جائزة1.png" alt="الجائزة الأولى" /></div>
            <div class="award"><img src="~/images/جائزة2.png" alt="الجائزة الثانية" /></div>
            <div class="award"><img src="~/images/جائزة3.png" alt="الجائزة الثالثة" /></div>
            <div class="award"><img src="~/images/جائزة4.png" alt="الجائزة الرابعة" /></div>
        </div>
    </div>
</section>
@section Scripts {
    <script>
        function animateCount(id, target) {
            let count = 0;
            const interval = setInterval(() => {
                if (count < target) {
                    count++;
                    document.getElementById(id).innerText = count;
                } else {
                    clearInterval(interval);
                }
            }, 50);
        }

        window.onload = function () {
            animateCount("studentsCount", @Model.Report.TotalStudents);
            animateCount("newStudentsCount", @Model.Report.NewStudents);
            animateCount("graduatedCount", @Model.Report.GraduatedStudents);
            animateCount("teachersCount", @Model.Report.TotalTeachers);
            animateCount("halaqatCount", @Model.Report.TotalHalaqat);
            animateCount("eventsCount", @Model.Report.EventsCount);
        };
    </script>
}
<script>
function startSlider(selector, childSelector, moveAmount) {
    const container = document.querySelector(selector);
    let items = Array.from(container.querySelectorAll(childSelector));

    setInterval(() => {
        items.forEach(item => {
            item.classList.add('slider-moving');
        });

        setTimeout(() => {
            let firstItem = items.shift();
            container.appendChild(firstItem);
            items.push(firstItem);

            items.forEach(item => {
                item.classList.remove('slider-moving');
            });
        }, 1000); 
    }, 3000); 
}

startSlider('.partners-logos', 'img');
startSlider('.awards-logos', '.award');
</script>
